# ═══════════════════════════════════════════════════════════════════════════
# SCHEMA: execution-info.toon
# ═══════════════════════════════════════════════════════════════════════════
# Execution tracking snapshot - summary of TDD execution plans and their
# progress. Generated by plan plugin during autonomous execution.
#
# ═══════════════════════════════════════════════════════════════════════════
# SCHEMA METADATA
# ═══════════════════════════════════════════════════════════════════════════
#
# $schema: shared/schemas/execution-info-schema.toon
# $instance: status/execution-info.toon
# $generator: /plan:execute
# $version: 0.2.2
#
# Referenced by: workspace-info-schema.toon (relatedData.executionInfo)
# References: outcomes-info-schema.toon (for outcome linkage)
#
# ═══════════════════════════════════════════════════════════════════════════
# TYPE NOTATION
#   →const           Fixed value, copy exactly as shown
#   →string          Text value
#   →string?         Optional text (can be null)
#   →int             Integer number
#   →datetime        ISO-8601 timestamp
#   →path            Relative file path
#   →percent         Integer 0-100 followed by %
#   →enum[Name]      One of the values in ENUMS section
#   →array<Type>     Tabular array rows
#
# ═══════════════════════════════════════════════════════════════════════════

# ─── METADATA ──────────────────────────────────────────────────────────────

@context: https://schema.org                    # →const
@type: ItemList                                 # →const
@id: executions-index                           # →const
dateModified: 2025-12-02T14:30:00Z              # →datetime (last update)
numberOfItems: 3                                # →int (total execution count)

# ─── SUMMARY STATISTICS ────────────────────────────────────────────────────

summary@type: PropertyValue                     # →const
summary.totalExecutions: 3                      # →int
summary.activeExecutions: 1                     # →int (status=in-progress)
summary.completedExecutions: 1                  # →int (status=completed)
summary.failedExecutions: 1                     # →int (status=failed)
summary.totalPhases: 12                         # →int (across all executions)
summary.completedPhases: 7                      # →int
summary.averageProgress: 58%                    # →percent

# ─── EXECUTION INDEX ───────────────────────────────────────────────────────
# Primary lookup table for all executions

# →array<ExecutionIndexRow>
execution.index{id,name,outcome,status,progress,currentPhase,totalPhases,startTime|tab}:
exec-001	Auth Implementation	005-implement-auth	in-progress	60%	3	5	2025-12-02T09:00:00Z
exec-002	Data Model Setup	003-data-model	completed	100%	4	4	2025-12-01T10:00:00Z
exec-003	API Scaffold	004-api-scaffold	failed	33%	2	3	2025-12-01T14:00:00Z

# ─── ACTIVE EXECUTION DETAIL ───────────────────────────────────────────────
# Details for currently active execution (if any)

activeExecution@type: Action                    # →const
activeExecution.id: exec-001                    # →string? (null if none active)
activeExecution.name: Auth Implementation       # →string?
activeExecution.outcome: 005-implement-auth     # →string?
activeExecution.actionStatus: ActiveActionStatus  # →enum[ActionStatusType]
activeExecution.currentPhase: 3                 # →int?
activeExecution.phaseName: Implement Core Auth  # →string?
activeExecution.progress: 60%                   # →percent?
activeExecution.startTime: 2025-12-02T09:00:00Z  # →datetime?
activeExecution.estimatedCompletion: 2025-12-02T17:00:00Z  # →datetime?

# ─── PHASE BREAKDOWN ───────────────────────────────────────────────────────
# Phases for active execution

# →array<PhaseRow>
activeExecution.phases{number,name,status,testsTotal,testsPassed,duration|tab}:
1	Setup Test Framework	completed	5	5	15m
2	Write Auth Tests	completed	12	12	45m
3	Implement Core Auth	in-progress	8	5	null
4	Integration Tests	pending	10	0	null
5	Documentation	pending	3	0	null

# ─── COST TRACKING ─────────────────────────────────────────────────────────
# Token/cost tracking for executions

# →array<CostRow>
execution.costs{id,inputTokens,outputTokens,estimatedCost,model|tab}:
exec-001	45000	12000	$0.85	claude-sonnet-4-20250514
exec-002	32000	8000	$0.60	claude-sonnet-4-20250514
exec-003	18000	4500	$0.34	claude-sonnet-4-20250514

# ─── RECENT COMPLETIONS ────────────────────────────────────────────────────
# Recently completed executions

# →array<CompletionRow>
recentCompletions{id,name,outcome,completedAt,duration,testsRun|tab}:
exec-002	Data Model Setup	003-data-model	2025-12-01T14:30:00Z	4h30m	28

# ─── FAILURES ──────────────────────────────────────────────────────────────
# Failed executions requiring attention

# →array<FailureRow>
failures{id,name,outcome,failedAt,phase,reason|tab}:
exec-003	API Scaffold	004-api-scaffold	2025-12-01T16:00:00Z	2	Test timeout - external service unavailable


# ═══════════════════════════════════════════════════════════════════════════
# ENUMS
# ═══════════════════════════════════════════════════════════════════════════

# ExecutionStatus:
#   pending      - Not yet started
#   in-progress  - Currently executing
#   paused       - Temporarily stopped
#   completed    - Finished successfully
#   failed       - Stopped due to error

# PhaseStatus:
#   pending      - Not yet started
#   in-progress  - Currently executing
#   completed    - Finished successfully
#   failed       - Stopped due to error
#   skipped      - Intentionally skipped

# ActionStatusType (for activeExecution):
#   PotentialActionStatus   - No active execution
#   ActiveActionStatus      - Currently executing
#   CompletedActionStatus   - Execution completed
#   FailedActionStatus      - Execution failed


# ═══════════════════════════════════════════════════════════════════════════
# GENERATION RULES
# ═══════════════════════════════════════════════════════════════════════════
#
# 1. Update numberOfItems to match total execution count
# 2. Only ONE execution can be activeExecution at a time
# 3. When no active execution: set activeExecution.* fields to null
#    and actionStatus to PotentialActionStatus
# 4. duration format: Xh Ym (e.g., "4h30m", "45m", "2h")
# 5. estimatedCost format: $X.XX
# 6. progress always includes % symbol
#
# ═══════════════════════════════════════════════════════════════════════════
