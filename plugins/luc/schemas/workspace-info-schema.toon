# ═══════════════════════════════════════════════════════════════════════════
# SCHEMA: workspace-info.toon
# ═══════════════════════════════════════════════════════════════════════════
# TOP-LEVEL workspace environment snapshot for IDE workspaces (IntelliJ IDEA,
# VS Code). Tracks strategic directories, projects, and current focus.
# Generated by ws plugin via /ws:enviro command.
#
# ═══════════════════════════════════════════════════════════════════════════
# HIERARCHY: WORKSPACE vs PROJECT
# ═══════════════════════════════════════════════════════════════════════════
#
# workspace-info.toon (THIS SCHEMA)
# ├── Top-level info file for an IDE workspace
# ├── Lives at workspace root (where .idea/ or .vscode/ resides)
# ├── Contains strategic directories:
# │   ├── capabilities/   - Strategic capability definitions
# │   ├── outcomes/       - Tactical work units (queued → completed)
# │   └── research/       - Research and investigation artifacts
# ├── Links to ALL projects within the workspace
# └── Instance: .claude/workspace-info.toon
#
# project-info.toon (SEPARATE SCHEMA)
# ├── Project-level info file for individual codebases
# ├── Lives inside each project directory
# ├── Projects can be:
# │   ├── Standalone repository (single project = workspace)
# │   └── Part of a monorepo (multiple projects in one workspace)
# └── Instance: {project}/.claude/project-info.toon
#
# EXAMPLE STRUCTURES:
#
# Monorepo workspace:
#   my-workspace/                    ← workspace-info.toon here
#   ├── .claude/workspace-info.toon
#   ├── .idea/ or .vscode/
#   ├── capabilities/
#   ├── outcomes/
#   ├── research/
#   ├── libs/
#   │   └── core/                    ← project-info.toon here
#   │       └── .claude/project-info.toon
#   └── apps/
#       └── web/                     ← project-info.toon here
#           └── .claude/project-info.toon
#
# Standalone project (workspace = project):
#   my-project/                      ← project-info.toon here (no workspace)
#   ├── .claude/project-info.toon
#   ├── .vscode/
#   └── src/
#
# ═══════════════════════════════════════════════════════════════════════════
# SCHEMA METADATA
# ═══════════════════════════════════════════════════════════════════════════
#
# $schema: luc/schemas/workspace-info-schema.toon
# $instance: .claude/workspace-info.toon
# $generator: /ws:enviro
# $version: 0.3.0
#
# ═══════════════════════════════════════════════════════════════════════════
# RELATED SCHEMAS
# ═══════════════════════════════════════════════════════════════════════════
#
# This schema references data defined by these related schemas:
#
# | Schema | Purpose | Instance Location |
# |--------|---------|-------------------|
# | project-info | Individual project metadata | {project}/.claude/project-info.toon |
# | capabilities-info | Capability index | .claude/capabilities-info.toon |
# | outcomes-info | Outcome stage tracking | .claude/outcomes-info.toon |
# | execution-info | Execution state | .claude/execution-info.toon |
# | core-values | Value alignment (ref only) | (no instance) |
# | actor-registry | Stakeholders (ref only) | (no instance) |
#
# ═══════════════════════════════════════════════════════════════════════════
# TYPE NOTATION
# ═══════════════════════════════════════════════════════════════════════════
#
#   →const           Fixed value, copy exactly as shown
#   →string          Text value
#   →string?         Optional text (can be null)
#   →int             Integer number
#   →datetime        ISO-8601 timestamp (e.g., 2025-01-15T10:00:00Z)
#   →url?            Optional URL
#   →path            Relative file path
#   →enum[Name]      One of the values in ENUMS section
#   →array<Type>     Tabular array rows
#
# ═══════════════════════════════════════════════════════════════════════════

# ─── METADATA ──────────────────────────────────────────────────────────────

@context: https://schema.org                    # →const
@type: SoftwareSourceCode                       # →const
@id: workspace/my-workspace                     # →string (pattern: workspace/{name})
dateCreated: 2025-01-15T10:00:00Z               # →datetime (immutable after creation)
dateModified: 2025-12-02T14:30:00Z              # →datetime (auto-updated on save)
softwareVersion: 0.3.0                          # →string (ws plugin version)

# ─── WORKSPACE ─────────────────────────────────────────────────────────────

workspace@type: Project                         # →const
workspace.name: my-workspace                    # →string (required, workspace name)
workspace.codeRepository: https://github.com/user/repo  # →url?
workspace.version: abc1234                      # →string? (short git commit hash)
workspace.dateModified: 2025-12-02T10:00:00Z    # →datetime? (commit timestamp)

# ─── RELATED DATA FILES ────────────────────────────────────────────────────
# Paths to related TOON instances (null if not yet generated)

relatedData@type: ItemList                      # →const
relatedData.capabilitiesInfo: .claude/capabilities-info.toon  # →path? (schema: capabilities-info-schema.toon)
relatedData.outcomesInfo: .claude/outcomes-info.toon  # →path? (schema: outcomes-info-schema.toon)
relatedData.executionInfo: .claude/execution-info.toon  # →path? (schema: execution-info-schema.toon)

# ─── PROJECTS ──────────────────────────────────────────────────────────────
# Links to all projects within this workspace.
# Each project has its own project-info.toon at {path}/.claude/project-info.toon
# Projects can be standalone repos or subdirectories of a monorepo.

projects@type: ItemList                         # →const
projects.numberOfItems: 2                       # →int (count of rows)

# →array<ProjectRow> where ProjectRow = {name, path, @type, technologies, projectInfo}
# projectInfo column points to the project's own TOON file (null if not yet generated)
project{name,path,@type,technologies,projectInfo|tab}:
lib-core	./libs/core	SoftwareSourceCode	typescript	./libs/core/.claude/project-info.toon
app-web	./apps/web	WebApplication	typescript,react	./apps/web/.claude/project-info.toon

# ═══════════════════════════════════════════════════════════════════════════
# STRATEGIC DIRECTORIES
# ═══════════════════════════════════════════════════════════════════════════
# These directories exist at workspace root and define strategic work.
# They are NOT inside individual projects - they span the entire workspace.

# ─── CAPABILITIES ──────────────────────────────────────────────────────────
# Strategic capability definitions with maturity tracking.
# Full details in relatedData.capabilitiesInfo

capabilities@type: ItemList                     # →const
capabilities.path: capabilities/                # →path (workspace-level directory)
capabilities.numberOfItems: 2                   # →int

# →array<CapabilityRow> where CapabilityRow = {identifier, name, path, maturityLevel:int[0-100]}
capability{identifier,name,path,maturityLevel|tab}:
auth-system	Authentication System	capabilities/auth-system	45
data-pipeline	Data Pipeline	capabilities/data-pipeline	20

# ─── OUTCOMES ──────────────────────────────────────────────────────────────
# Tactical work units that move through stages: queued → ready → in-progress → completed
# Full details in relatedData.outcomesInfo

outcomes@type: ItemList                         # →const
outcomes.path: outcomes/                        # →path (workspace-level directory)

# →array<OutcomeSummaryRow> - ALWAYS include all 5 stages
outcomes.summary{stage,count,path|tab}:
queued	3	outcomes/queued/
ready	2	outcomes/ready/
in-progress	1	outcomes/in-progress/
blocked	0	outcomes/blocked/
completed	5	outcomes/completed/

# ─── RESEARCH ──────────────────────────────────────────────────────────────
# Research artifacts, investigations, and reference material.

research@type: ItemList                         # →const
research.path: research/                        # →path (workspace-level directory)
research.numberOfItems: 3                       # →int

# ─── PLANS ─────────────────────────────────────────────────────────────────
# Implementation plans and design documents.

plans@type: ItemList                            # →const
plans.path: plans/                              # →path (workspace-level directory)
plans.numberOfItems: 2                          # →int

# ─── EXECUTIONS ────────────────────────────────────────────────────────────
# Active execution tracking for outcomes.
# Full details in relatedData.executionInfo

executions@type: ItemList                       # →const
executions.path: executions/                    # →path (workspace-level directory)
executions.numberOfItems: 1                     # →int

# ─── IDE INTEGRATION ───────────────────────────────────────────────────────

ide@type: SoftwareApplication                   # →const
ide.name: IntelliJ IDEA                         # →string ("none" if no IDE detected)
ide.configPath: .idea/                          # →path?
ide.sdkName: corretto-21                        # →string?
ide.languageLevel: JDK_21                       # →string?

# →array<ModuleRow> where ModuleRow = {name, path, type}
ide.modules{name,path,type|tab}:
core	./libs/core	JAVA_MODULE
web	./apps/web	WEB_MODULE

# →array<VcsRootRow> where VcsRootRow = {directory, vcs}
ide.vcsRoots{directory,vcs|tab}:
.	Git

# ─── CURRENT FOCUS ─────────────────────────────────────────────────────────

focus@type: Action                              # →const
focus.name: 005-implement-auth                  # →string? (null if no focus)
focus.target: outcomes/in-progress/005-implement-auth  # →path? (null if no focus)
focus.actionStatus: ActiveActionStatus          # →enum[ActionStatusType]

# ─── SESSION TRACKING ──────────────────────────────────────────────────────

lastSession.id: sess-abc123def456               # →string?
lastSession.timestamp: 2025-12-02T14:30:00Z     # →datetime?
lastSession.event: PostToolUse                  # →string? (hook event name)


# ═══════════════════════════════════════════════════════════════════════════
# ENUMS
# ═══════════════════════════════════════════════════════════════════════════

# ActionStatusType (schema.org/ActionStatusType):
#   PotentialActionStatus   - No active focus / not started
#   ActiveActionStatus      - Currently working on this outcome
#   CompletedActionStatus   - Finished successfully
#   FailedActionStatus      - Blocked or failed

# ProjectType (project @type column):
#   SoftwareApplication     - Application code
#   SoftwareSourceCode      - Library/shared code
#   WebApplication          - Web application
#   MobileApplication       - Mobile app
#   APIReference            - API service
#   Plugin                  - Plugin module


# ═══════════════════════════════════════════════════════════════════════════
# GENERATION RULES
# ═══════════════════════════════════════════════════════════════════════════
#
# 1. Fields marked →const MUST be copied exactly as shown
# 2. Fields marked TYPE? can be null - write as: fieldName: null
# 3. Tabular arrays use TAB character (\t) between columns
# 4. Empty arrays: keep header line, omit data rows
# 5. Update numberOfItems to match actual row count
# 6. ALWAYS include all 5 stages in outcomes.summary (even if count=0)
# 7. When no focus: set focus.name and focus.target to null,
#    and focus.actionStatus to PotentialActionStatus
# 8. relatedData paths can be null if those files haven't been generated yet
# 9. project.projectInfo column can be null if project's TOON not yet generated
# 10. Strategic directories (capabilities/, outcomes/, research/) are at
#     workspace root, NOT inside individual projects
#
# ═══════════════════════════════════════════════════════════════════════════
