# ═══════════════════════════════════════════════════════════════════════════
# SCHEMA: workspace-info.toon
# ═══════════════════════════════════════════════════════════════════════════
# Workspace environment snapshot - tracks projects, capabilities, outcomes,
# and current focus. Generated by ws plugin via /ws:enviro command.
#
# ═══════════════════════════════════════════════════════════════════════════
# SCHEMA METADATA
# ═══════════════════════════════════════════════════════════════════════════
#
# $schema: plugins/ws/templates/data/workspace-info-schema.toon
# $instance: .claude/workspace-info.toon
# $generator: /ws:enviro
# $version: 0.2.2
#
# ═══════════════════════════════════════════════════════════════════════════
# RELATED SCHEMAS
# ═══════════════════════════════════════════════════════════════════════════
#
# This schema references data defined by these related schemas:
#
# | Schema | Schema Location | Instance Location |
# |--------|-----------------|-------------------|
# | capabilities-info | plugins/ws/templates/data/capabilities-info-schema.toon | status/capabilities-info.toon |
# | outcomes-info | plugins/ws/templates/data/outcomes-info-schema.toon | status/outcomes-info.toon |
# | execution-info | plugins/ws/templates/data/execution-info-schema.toon | status/execution-info.toon |
# | core-values | plugins/ws/templates/data/core-values-schema.toon | (reference data, no instance) |
# | actor-registry | plugins/ws/templates/data/actor-registry-schema.toon | (reference data, no instance) |
#
# ═══════════════════════════════════════════════════════════════════════════
# TYPE NOTATION
# ═══════════════════════════════════════════════════════════════════════════
#
#   →const           Fixed value, copy exactly as shown
#   →string          Text value
#   →string?         Optional text (can be null)
#   →int             Integer number
#   →datetime        ISO-8601 timestamp (e.g., 2025-01-15T10:00:00Z)
#   →url?            Optional URL
#   →path            Relative file path
#   →enum[Name]      One of the values in ENUMS section
#   →array<Type>     Tabular array rows
#
# ═══════════════════════════════════════════════════════════════════════════

# ─── METADATA ──────────────────────────────────────────────────────────────

@context: https://schema.org                    # →const
@type: SoftwareSourceCode                       # →const
@id: workspace/my-workspace                     # →string (pattern: workspace/{name})
dateCreated: 2025-01-15T10:00:00Z               # →datetime (immutable after creation)
dateModified: 2025-12-02T14:30:00Z              # →datetime (auto-updated on save)
softwareVersion: 0.2.2                          # →string (ws plugin version)

# ─── WORKSPACE ─────────────────────────────────────────────────────────────

workspace@type: Project                         # →const
workspace.name: my-workspace                    # →string (required, workspace name)
workspace.codeRepository: https://github.com/user/repo  # →url?
workspace.version: abc1234                      # →string? (short git commit hash)
workspace.dateModified: 2025-12-02T10:00:00Z    # →datetime? (commit timestamp)

# ─── RELATED DATA FILES ────────────────────────────────────────────────────
# Paths to related TOON instances (null if not yet generated)

relatedData@type: ItemList                      # →const
relatedData.capabilitiesInfo: status/capabilities-info.toon  # →path? (schema: capabilities-info-schema.toon)
relatedData.outcomesInfo: status/outcomes-info.toon  # →path? (schema: outcomes-info-schema.toon)
relatedData.executionInfo: status/execution-info.toon  # →path? (schema: execution-info-schema.toon)

# ─── PROJECTS ──────────────────────────────────────────────────────────────

projects@type: ItemList                         # →const
projects.numberOfItems: 2                       # →int (count of rows)

# →array<ProjectRow> where ProjectRow = {name, codeRepository, version, dateModified, path, @type, technologies}
project{name,codeRepository,version,dateModified,path,@type,technologies|tab}:
lib-core	https://github.com/user/lib-core	def5678	2025-12-01T10:00:00Z	./libs/core	SoftwareSourceCode	typescript
app-web	https://github.com/user/app-web	ghi9012	2025-12-02T12:00:00Z	./apps/web	WebApplication	typescript,react

# ─── CAPABILITIES ──────────────────────────────────────────────────────────
# Summary data - full details in relatedData.capabilitiesInfo

capabilities@type: ItemList                     # →const
capabilities.path: capabilities/                # →path
capabilities.numberOfItems: 2                   # →int

# →array<CapabilityRow> where CapabilityRow = {identifier, name, path, maturityLevel:int[0-100]}
capability{identifier,name,path,maturityLevel|tab}:
auth-system	Authentication System	capabilities/auth-system	45
data-pipeline	Data Pipeline	capabilities/data-pipeline	20

# ─── OUTCOMES ──────────────────────────────────────────────────────────────
# Summary data - full details in relatedData.outcomesInfo

outcomes@type: ItemList                         # →const
outcomes.path: outcomes/                        # →path

# →array<OutcomeSummaryRow> - ALWAYS include all 5 stages
outcomes.summary{stage,count,path|tab}:
queued	3	outcomes/queued/
ready	2	outcomes/ready/
in-progress	1	outcomes/in-progress/
blocked	0	outcomes/blocked/
completed	5	outcomes/completed/

# ─── PLANS ─────────────────────────────────────────────────────────────────

plans@type: ItemList                            # →const
plans.path: plans/                              # →path
plans.numberOfItems: 2                          # →int

# ─── EXECUTIONS ────────────────────────────────────────────────────────────
# Summary data - full details in relatedData.executionInfo

executions@type: ItemList                       # →const
executions.path: executions/                    # →path
executions.numberOfItems: 1                     # →int

# ─── RESEARCH ──────────────────────────────────────────────────────────────

research@type: ItemList                         # →const
research.path: research/                        # →path
research.numberOfItems: 3                       # →int

# ─── IDE INTEGRATION ───────────────────────────────────────────────────────

ide@type: SoftwareApplication                   # →const
ide.name: IntelliJ IDEA                         # →string ("none" if no IDE detected)
ide.configPath: .idea/                          # →path?
ide.sdkName: corretto-21                        # →string?
ide.languageLevel: JDK_21                       # →string?

# →array<ModuleRow> where ModuleRow = {name, path, type}
ide.modules{name,path,type|tab}:
core	./libs/core	JAVA_MODULE
web	./apps/web	WEB_MODULE

# →array<VcsRootRow> where VcsRootRow = {directory, vcs}
ide.vcsRoots{directory,vcs|tab}:
.	Git

# ─── CURRENT FOCUS ─────────────────────────────────────────────────────────

focus@type: Action                              # →const
focus.name: 005-implement-auth                  # →string? (null if no focus)
focus.target: outcomes/in-progress/005-implement-auth  # →path? (null if no focus)
focus.actionStatus: ActiveActionStatus          # →enum[ActionStatusType]

# ─── SESSION TRACKING ──────────────────────────────────────────────────────

lastSession.id: sess-abc123def456               # →string?
lastSession.timestamp: 2025-12-02T14:30:00Z     # →datetime?
lastSession.event: PostToolUse                  # →string? (hook event name)


# ═══════════════════════════════════════════════════════════════════════════
# ENUMS
# ═══════════════════════════════════════════════════════════════════════════

# ActionStatusType (schema.org/ActionStatusType):
#   PotentialActionStatus   - No active focus / not started
#   ActiveActionStatus      - Currently working on this outcome
#   CompletedActionStatus   - Finished successfully
#   FailedActionStatus      - Blocked or failed

# ProjectType (project @type column):
#   SoftwareApplication     - Application code
#   SoftwareSourceCode      - Library/shared code
#   WebApplication          - Web application
#   MobileApplication       - Mobile app
#   APIReference            - API service
#   Plugin                  - Plugin module


# ═══════════════════════════════════════════════════════════════════════════
# GENERATION RULES
# ═══════════════════════════════════════════════════════════════════════════
#
# 1. Fields marked →const MUST be copied exactly as shown
# 2. Fields marked TYPE? can be null - write as: fieldName: null
# 3. Tabular arrays use TAB character (\t) between columns
# 4. Empty arrays: keep header line, omit data rows
# 5. Update numberOfItems to match actual row count
# 6. ALWAYS include all 5 stages in outcomes.summary (even if count=0)
# 7. When no focus: set focus.name and focus.target to null,
#    and focus.actionStatus to PotentialActionStatus
# 8. relatedData paths can be null if those files haven't been generated yet
#
# ═══════════════════════════════════════════════════════════════════════════
