{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://lucid-toolkit.dev/schemas/toon_schema.json",
  "title": "TOON Format Schema",
  "description": "JSON Schema for validating TOON (Task-Oriented Object Notation) format structures. TOON uses Schema.org vocabulary to represent actions, outcomes, and structured data in Claude Code workflows.",
  "type": "object",
  "required": ["@type"],
  "properties": {
    "@type": {
      "type": "string",
      "description": "Schema.org type identifier for the entity",
      "enum": [
        "Action",
        "CreateAction",
        "UpdateAction",
        "AnalyzeAction",
        "ChooseAction",
        "AssessAction",
        "ItemList"
      ]
    },
    "@id": {
      "type": "string",
      "description": "Unique identifier for this entity, typically a URI or local identifier"
    },
    "name": {
      "type": "string",
      "description": "Human-readable name or title for this entity"
    },
    "actionStatus": {
      "type": "string",
      "description": "Current status of the action in its lifecycle",
      "enum": [
        "PotentialActionStatus",
        "ActiveActionStatus",
        "CompletedActionStatus",
        "FailedActionStatus"
      ]
    },
    "result": {
      "type": "string",
      "description": "The result or outcome of the action after completion"
    },
    "error": {
      "type": "string",
      "description": "Error message or description if the action failed"
    },
    "object": {
      "type": "string",
      "description": "The object upon which the action is carried out or that is the focus of the action"
    },
    "numberOfItems": {
      "type": "integer",
      "description": "Number of items in an ItemList",
      "minimum": 0
    },
    "itemListElement": {
      "type": "array",
      "description": "Array of items contained in an ItemList",
      "items": {
        "type": "object",
        "description": "Individual item in the list, typically following TOON format"
      }
    },
    "x-maturity": {
      "type": "number",
      "description": "Extension: Maturity level or percentage (0-100) for capabilities or outcomes",
      "minimum": 0,
      "maximum": 100
    },
    "x-target": {
      "type": "string",
      "description": "Extension: Target file path, resource, or identifier"
    },
    "x-gap": {
      "type": "string",
      "description": "Extension: Gap analysis description or identified shortfall"
    },
    "x-contribution": {
      "type": "number",
      "description": "Extension: Contribution percentage to parent entity or capability",
      "minimum": 0,
      "maximum": 100
    },
    "x-tokens": {
      "type": "integer",
      "description": "Extension: Token count for LLM operations",
      "minimum": 0
    },
    "x-confidence": {
      "type": "number",
      "description": "Extension: Confidence score (0-1) for assessments or predictions",
      "minimum": 0,
      "maximum": 1
    },
    "x-duration": {
      "type": "string",
      "description": "Extension: Duration in ISO 8601 format (e.g., PT5M for 5 minutes)"
    },
    "x-costUSD": {
      "type": "number",
      "description": "Extension: Cost in US dollars for the operation",
      "minimum": 0
    }
  },
  "patternProperties": {
    "^x-": {
      "description": "Extension properties following the x- prefix pattern are allowed for custom metadata"
    }
  },
  "additionalProperties": true,
  "definitions": {
    "ActionStatusType": {
      "type": "string",
      "description": "Schema.org ActionStatusType enumeration",
      "enum": [
        "PotentialActionStatus",
        "ActiveActionStatus",
        "CompletedActionStatus",
        "FailedActionStatus"
      ]
    },
    "SchemaOrgType": {
      "type": "string",
      "description": "Supported Schema.org type identifiers",
      "enum": [
        "Action",
        "CreateAction",
        "UpdateAction",
        "AnalyzeAction",
        "ChooseAction",
        "AssessAction",
        "ItemList"
      ]
    }
  },
  "examples": [
    {
      "@type": "CreateAction",
      "@id": "action:create-capability",
      "name": "Create authentication capability",
      "actionStatus": "CompletedActionStatus",
      "result": "Created capability auth-system with 0% maturity",
      "x-tokens": 1500,
      "x-duration": "PT2M30S"
    },
    {
      "@type": "ItemList",
      "name": "Active Outcomes",
      "numberOfItems": 3,
      "itemListElement": [
        {
          "@type": "Action",
          "name": "Implement OAuth flow",
          "actionStatus": "ActiveActionStatus",
          "x-maturity": 45,
          "x-contribution": 30
        }
      ]
    },
    {
      "@type": "AssessAction",
      "name": "Assess authentication design",
      "actionStatus": "CompletedActionStatus",
      "result": "Design meets security requirements",
      "x-confidence": 0.92,
      "x-gap": "Missing rate limiting implementation"
    }
  ]
}
